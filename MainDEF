from PyQt6.QtWidgets import (
    QApplication, QWidget, QVBoxLayout, QHBoxLayout, QLabel, 
    QListWidget, QListWidgetItem
)

from PyQt6.QtCore import QSize, Qt
from PyQt6.QtGui import QIcon
import ventanaPedido 
from Styles import Styles 

class MenuGestionPedidos(QWidget):
    def __init__(self):
        super().__init__()
        self.setWindowTitle("Sistema de Gestión de Pedidos de Distribuidora Josue")
        self.menu()

    def menu(self):
        layout_principal = QHBoxLayout(self)

        # Menú lateral (layout vertical con logo y lista)
        layout_menu_lateral = QVBoxLayout()
        layout_principal.addLayout(layout_menu_lateral, 1)

        # Lista del menú
        self.lista_menu = QListWidget()
        self.lista_menu.setObjectName("menuLateral")
        self.lista_menu.currentRowChanged.connect(self.entrar_ventana)
        layout_menu_lateral.addWidget(self.lista_menu)

        logo_item = QListWidgetItem()
        logo_icon = QIcon("Recursos/logo.jpg")
        logo_item.setIcon(logo_icon)
        logo_item.setFlags(Qt.ItemFlag.NoItemFlags)
        self.lista_menu.setIconSize(QSize(100, 100))
        self.lista_menu.addItem(logo_item)

        # Ítems del menú
        opciones = [
            "DashBoard",
            "Clientes",
            "Pedidos",        
            "Productos",
            "Proveedores",
            "Reportes",
            "Cerrar Sesión"
        ]
        for opcion in opciones:
            self.lista_menu.addItem(QListWidgetItem(opcion))

        # Panel derecho 
        self.widget_derecha = QWidget()
        self.layout_derecha = QVBoxLayout(self.widget_derecha)
        layout_principal.addWidget(self.widget_derecha, 3)

    def limpiar_derecha(self):
        for i in reversed(range(self.layout_derecha.count())):
            widget = self.layout_derecha.itemAt(i).widget()
            if widget:
                widget.setParent(None)

    def entrar_ventana(self, index):
        self.limpiar_derecha()
        if index == 1:  # DashBoard
            self.layout_derecha.addWidget(QLabel("Bienvenido al Dashboard"))
        elif index == 2:  # Clientes
            self.layout_derecha.addWidget(QLabel("Ventana de Clientes"))
        elif index == 3:  # Pedidos
            self.ventana_pedidos = ventanaPedido.VentanaPedidos()
            self.layout_derecha.addWidget(self.ventana_pedidos)
        elif index == 4:  # Productos
            self.layout_derecha.addWidget(QLabel("Ventana de Productos"))
        elif index == 5:  # Proveedores
            self.layout_derecha.addWidget(QLabel("Ventana de Proveedores"))
        elif index == 6:  # Reportes
            self.layout_derecha.addWidget(QLabel("Ventana de Reportes"))
        elif index == 7:  # Cerrar sesión
            self.close()

if __name__ == "__main__":
    app = QApplication([])
    # Aplicar estilo general
    window = MenuGestionPedidos()
    Styles.aplicar_estilo_global(window, window.lista_menu)
    window.resize(800, 600)
    window.show()
    app.exec()
